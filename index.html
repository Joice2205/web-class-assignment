<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Health Fate Checker üòÖ</title>
<style>
  :root{
    --bg:#0f172a;
    --card:#111827;
    --muted:#94a3b8;
    --accent:#22c55e;
    --warn:#f59e0b;
    --danger:#ef4444;
    --ring:#38bdf8;
  }
  *{box-sizing:border-box}
  body{
  margin:0; 
  font-family:system-ui,Segoe UI,Roboto,Inter,Arial,sans-serif;
  background: 
    linear-gradient(rgba(136, 94, 94, 0.65), rgba(136, 94, 94, 0.65)), 
    url("image.png") no-repeat center center fixed;
  background-size: cover;
  color:#e5e7eb;
}

  header{padding:24px 20px; text-align:center}
  header h1{margin:0 0 6px; font-size:clamp(22px,3vw,30px)}
  header p{margin:0; color:var(--muted)}
  .wrap{max-width:1000px; margin:0 auto; padding:0 16px 40px; display:grid; gap:20px}
  .grid{display:grid; grid-template-columns:1.2fr 1fr; gap:20px}
  .card{
    background: rgba(11, 18, 32, 0.247); /* dark but see-through */
    border: 1px solid #0b122042;
    border-radius: 16px; 
    padding: 18px;
    box-shadow: 0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.03);
    backdrop-filter: blur(10px); /* makes background poster look cinematic */
  }

  .card h2{margin-top:0; font-size:18px}
  .row{display:grid; grid-template-columns:1fr 1fr; gap:14px}
  label{font-size:13px; color:#cbd5e1; display:block; margin:6px 0}
  input[type="text"], input[type="number"], select, textarea{
    width:100%; padding:10px 12px; border-radius:10px; border:1px solid #1f2937;
    background:#0b1220; color:#e5e7eb; outline:none;
  }
  textarea{min-height:86px; resize:vertical}
  input[type="file"]{
    width:100%; padding:10px; border-radius:10px; border:1px dashed #334155; background:#0b1220; color:#cbd5e1;
  }
  input:focus, select:focus, textarea:focus{border-color:var(--ring); box-shadow:0 0 0 4px #0ea5e91f}
  .btn{
    display:inline-flex; align-items:center; gap:8px; padding:10px 16px; border-radius:12px;
    border:1px solid #1f2937; background:#0ea5e9; color:#001016; font-weight:700; cursor:pointer;
  }
  .btn:hover{filter:brightness(1.05)}
  .muted{color:var(--muted); font-size:12px}

  /* Scene hidden by default */
  .scene{
    display:none;
    position:relative; height:320px; border-radius:16px; background:#0b1020;
    border:1px solid #1f2937; overflow:hidden;
    align-items:flex-end; justify-content:center;
  }
  .scene.show{display:flex}

  .ground{position:absolute; bottom:0; left:0; right:0; height:60px; background:#0a1224; border-top:1px solid #1e293b}
  .body, .coffin{position:absolute; bottom:60px; font-size:72px; line-height:1}
  .body{left:22%}
  .coffin{right:18%}
  .message{margin-top:10px; padding:12px 14px; border-radius:12px; background:#071226; border:1px solid #1f2937; min-height:48px}
  .ok{border-color:#064e3b; background:#052e24}
  .warn{border-color:#7c2d12; background:#2a0c0b}
  .userCard{display:flex; gap:14px; align-items:center}
  .userCard img{width:62px; height:62px; object-fit:cover; border-radius:12px; border:1px solid #1f2937}
  .chip{display:inline-block; padding:2px 8px; border-radius:999px; border:1px solid #334155; color:#cbd5e1; margin:4px 6px 0 0; font-size:12px}
  /* Animations */
  @keyframes faint {
    0% {transform:translate(0,0) rotate(0deg)}
    40%{transform:translate(10px,-8px) rotate(6deg)}
    100%{transform:translate(-40px,120px) rotate(90deg); opacity:.85}
  }
  @keyframes jump {
    0% {transform:translate(0,0)}
    40%{transform:translate(160px,-130px)}
    70%{transform:translate(260px,-30px)}
    100%{transform:translate(340px,30px) scale(.92); opacity:.2}
  }
  .do-faint{animation:faint 1.2s ease-in forwards}
  .do-jump{animation:jump 1.3s cubic-bezier(.2,.7,.2,1) forwards}
  .coffinLid{
    position:absolute; right:18%; bottom:60px; width:90px; height:20px; background:#3f1d15; border:2px solid #1a0c08; border-bottom:none; transform-origin:left bottom; transform:rotate(0deg);
  }
  .coffinBox{
    position:absolute; right:18%; bottom:60px; width:90px; height:140px; background:#5b2b20; border:2px solid #1a0c08; border-top:none; border-radius:0 0 10px 10px;
  }
  .lid-close{animation: lid 1.1s .9s ease-out forwards}
  @keyframes lid { to { transform:rotate(-85deg)} }

  /* Dance animation */
  @keyframes dance {
    0%,100% {transform:rotate(0deg) translateY(0)}
    25% {transform:rotate(-10deg) translateY(-12px)}
    50% {transform:rotate(10deg) translateY(-18px)}
    75% {transform:rotate(-5deg) translateY(-10px)}
  }
  .do-dance{animation:dance 1s infinite ease-in-out}

  footer{opacity:.6; text-align:center; font-size:12px; margin-top:14px}
</style>
</head>
<body>
  <header>
    <h1>Health Fate Checker</h1>
    <p>Enter your details and the foods you regularly eat. Let the drama begin üé≠</p>
  </header>

  <div class="wrap">
    <div class="grid">
      <!-- Form -->
      <div class="card">
        <h2>üë§ Your Details</h2>
        <div class="row">
          <div>
            <label>Name</label>
            <input id="name" type="text" placeholder="Your full name" />
          </div>
          <div>
            <label>Gender</label>
            <select id="gender">
              <option value="" selected disabled>Select</option>
              <option>Female</option>
              <option>Male</option>
              <option>Non-binary</option>
              <option>Prefer not to say</option>
            </select>
          </div>
          <div>
            <label>Locality / City</label>
            <input id="locality" type="text" placeholder="e.g., Chennai" />
          </div>
          <div>
            <label>Age</label>
            <input id="age" type="number" min="1" max="120" placeholder="e.g., 22" />
          </div>
          <div>
            <label>Profile Photo</label>
            <input id="photo" type="file" accept="image/*" />
            <div class="muted">Optional. A small preview appears on the right.</div>
          </div>
          <div>
            <label>Foods you regularly eat (comma separated)</label>
            <textarea id="foods" placeholder="e.g., rice, dal, pizza, salad, fries, coke"></textarea>
          </div>
        </div>
        <div style="margin-top:14px; display:flex; gap:10px; align-items:center">
          <button id="submitBtn" class="btn" type="button">Submit & Reveal Fate</button>
          <span id="tips" class="muted"></span>
        </div>
      </div>

      <!-- Preview + Result -->
      <div class="card">
        <h2>ü™™ Preview</h2>
        <div class="userCard">
          <img id="avatar" alt="photo preview" src="" />
          <div>
            <div id="who">No user yet.</div>
            <div id="where" class="muted"></div>
            <div id="chips"></div>
          </div>
        </div>

        <h2 style="margin-top:18px">Scene</h2>
        <div class="scene" id="scene">
          <div class="body" id="body" aria-label="human"></div>
          <div class="coffinBox"></div>
          <div class="coffinLid" id="lid"></div>
          <div class="ground"></div>
        </div>

        <div id="result" class="message"></div>
      </div>
    </div>

    <footer>This is a playful demo. Please don‚Äôt take the ‚Äúpredictions‚Äù seriously ‚ô•</footer>
  </div>

   <!-- Background Music -->
  <audio id="bgMusic" preload="auto" loop src="Akumpatham Bgm.mp3"></audio>

  <!-- Added missing sound effects -->
  <audio id="sadSong" preload="auto" src="sad.mp3"></audio>
  <audio id="danceSong" preload="auto" src="dance.mp3"></audio>

  <div id="soundPrompt" style="display:none; place-items:center; gap:10px; padding:10px; background:rgba(0,0,0,.6); border-radius:10px;">
  <p>üîä Enable background music?</p>
  <button id="enableSoundBtn" class="btn">Enable</button>
  <button id="soundToggle" class="btn">Toggle</button>
  </div>


<script>
  const JUNK_KEYWORDS = ["pizza","burger","fries","chips","coke","pepsi","cake","fried","biryani"];

  const photoInput = document.getElementById('photo');
  const avatar = document.getElementById('avatar');
  const who = document.getElementById('who');
  const where = document.getElementById('where');
  const chips = document.getElementById('chips');
  const result = document.getElementById('result');
  const bodyEl = document.getElementById('body');
  const lid = document.getElementById('lid');
  const submitBtn = document.getElementById('submitBtn');
  const tips = document.getElementById('tips');
  const sadSong = document.getElementById('sadSong');
  const danceSong = document.getElementById('danceSong');
  const scene = document.getElementById('scene');

  photoInput.addEventListener('change', (e) => {
    const file = e.target.files?.[0];
    if (!file) { avatar.src = ""; return; }
    const reader = new FileReader();
    reader.onload = () => { avatar.src = reader.result; };
    reader.readAsDataURL(file);
  });

  function parseFoods(text){
    const list = text.toLowerCase().split(/[,;\n]+/).map(s=>s.trim()).filter(Boolean);
    let junkCount = 0; let junkItems = [];
    for(const item of list){
      if(JUNK_KEYWORDS.some(k => item.includes(k))){ junkCount++; junkItems.push(item); }
    }
    return { list, junkCount, junkItems };
  }

  function resetScene(){
    bodyEl.className = "body";
    bodyEl.textContent = "";
    lid.classList.remove('lid-close');
    bodyEl.style.opacity = "1";
    bodyEl.style.transform = "none";
    sadSong.pause(); sadSong.currentTime=0;
    danceSong.pause(); danceSong.currentTime=0;
  }

  submitBtn.addEventListener('click', () => {
    resetScene();
    result.className = "message";

    // Show scene on submit
    scene.classList.add('show');

    const name = document.getElementById('name').value.trim();
    const gender = document.getElementById('gender').value;
    const locality = document.getElementById('locality').value.trim();
    const age = parseInt(document.getElementById('age').value,10);
    const foodsText = document.getElementById('foods').value;

    if(!name || !gender || !locality || !age || !foodsText){
      result.textContent = "Please fill all fields before submitting.";
      result.classList.add('warn');
      return;
    }

    who.textContent = `${name} ‚Ä¢ ${gender} ‚Ä¢ ${age} yrs`;
    where.textContent = locality;
    chips.innerHTML = "";
    parseFoods(foodsText).list.slice(0,8).forEach(f=>{
      const span = document.createElement('span');
      span.className = 'chip';
      span.textContent = f;
      chips.appendChild(span);
    });

    const { list, junkCount, junkItems } = parseFoods(foodsText);
    const total = list.length || 1;
    const junkRatio = junkCount / total;
    const moreJunk = junkCount >= 3 || junkRatio >= 0.5;
    const anyJunk = junkCount > 0;

    if (age > 40 && moreJunk) {
      bodyEl.textContent = "üßçüèª‚Äç‚ôÄÔ∏è"; // unhealthy body
      bodyEl.classList.add('do-jump');
      lid.classList.add('lid-close');
      result.innerHTML = `üò¨ <b>${name}</b>, age ${age}. Too much junk! you are dead.`;
      result.classList.add('warn');
      sadSong.play();
    } else if (age <= 40 && moreJunk){
      bodyEl.textContent = "üßçüèª‚Äç‚ôÄÔ∏è"; // fainted body
      bodyEl.classList.add('do-faint');
      result.innerHTML = `ü§¢ ${name}, young but too much junk. you are fainted,only few years is remaining for you to live .`;
      result.classList.add('warn');
      danceSong.play();
    } else {
      bodyEl.textContent = "üíÉ"; // healthy body
      bodyEl.classList.add('do-dance');
      result.innerHTML = `üéâ ${name}, looking good! Keep up healthy habits.`;
      result.classList.add('ok');
      danceSong.play();
    }

    tips.textContent = anyJunk
      ? `Detected junk: ${junkItems.slice(0,5).join(", ") || "‚Äî"}`
      : `No junk detected. Nice!`;
  });
    const bg = document.getElementById('bgMusic');
    const promptEl = document.getElementById('soundPrompt');
    const enableBtn = document.getElementById('enableSoundBtn');
    const toggleBtn = document.getElementById('soundToggle');
    const PREF_KEY = 'musicPref';
    const savedPref = localStorage.getItem(PREF_KEY);

    function setToggleLabel() {
      toggleBtn.textContent = bg.paused ? 'üîà Music: Off' : 'üîä Music: On';
    }

    async function tryMutedAutoplay() {
      if (savedPref === 'off') {
        bg.muted = true;
        bg.pause();
        setToggleLabel();
        return;
      }
      bg.muted = true;
      bg.volume = 1;
      try {
        await bg.play();
        if (!localStorage.getItem('hasInteractedForSound')) {
          promptEl.style.display = 'grid';
        }
      } catch (e) {
        promptEl.style.display = 'grid';
      }
      setToggleLabel();
    }

    function enableSound() {
      localStorage.setItem('hasInteractedForSound', '1');
      promptEl.style.display = 'none';
      bg.muted = false;
      bg.volume = 0;
      bg.play().then(() => {
        let v = 0;
        const step = 0.05;
        const id = setInterval(() => {
          v += step;
          bg.volume = Math.min(v, 1);
          if (v >= 1) clearInterval(id);
        }, 100);
        localStorage.setItem(PREF_KEY, 'on');
        setToggleLabel();
      }).catch(() => {});
    }

    ['pointerdown', 'keydown'].forEach(evt => {
      window.addEventListener(evt, function once() {
        if (bg.muted || bg.paused) enableSound();
        window.removeEventListener(evt, once);
      }, { once: true });
    });

    enableBtn.addEventListener('click', enableSound);

    toggleBtn.addEventListener('click', () => {
      if (bg.paused) {
        localStorage.setItem(PREF_KEY, 'on');
        enableSound();
      } else {
        bg.pause();
        localStorage.setItem(PREF_KEY, 'off');
        setToggleLabel();
      }
    });

    window.addEventListener('DOMContentLoaded', tryMutedAutoplay);

</script>
</body>
</html>
